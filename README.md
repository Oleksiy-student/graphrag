# GraphRAG (v1.6)

GraphRAG is an experimental **Retrieval-Augmented Generation (RAG)** pipeline written in Java.  
It combines **graph-based document storage** with **local embeddings** generated by **Qwen3 via Ollama**.

---

## Features
- ğŸ“„ **PDF/Text ingestion** â†’ documents are split into smaller chunks for indexing  
- ğŸ”— **Graph-based storage** â†’ built using [Apache TinkerPop / TinkerGraph](https://tinkerpop.apache.org/)  
- ğŸ§  **Embeddings** â†’ generated with **Qwen3 (via Ollama localhost API)** and stored using **Supabase**  
- ğŸ” **Retriever** â†’ **Supabase** vector similarity search to find relevant chunks  
- ğŸ” **Response generation** â†’ **Deepseek-r1 (via Ollama localhost API)** gives a complete response based on the retrieved chunks 
- ğŸ› ï¸ Modular pipeline for plugging in additional stores or models  

---

## Requirements
- **Java 17+**
- **Maven**
- **Ollama** installed locally ([https://ollama.com](https://ollama.com))
- Model: `qwen3:4b` pulled via Ollama  
  ```bash
  ollama pull qwen3:4b
  ```

---

## Run
```bash
mvn clean compile exec:java -Dexec.mainClass="com.ok.App"
```

You should see:
- Embedding vectors printed in debug logs  
- Chunks being ingested into the graph  
- Retrieval returning best-match passages  

---

## Usage Example
**Query:**
```
What is a service dog?
```

**Retriever Output (chunk snippet):**
```
"... A therapy dog or an emotional support dog, even if classified as such by a physician, is not considered a guide or service dog within the meaning of this by-law ..."
```

---

## Roadmap / TODO
- [x] Use Qwen3 for retrieval  
- [x] Hook up **Supabase Vector Store** for persistent, cloud-based embeddings  
- [x] Hook up an **LLM for query processing** (use retrieved chunks as context â†’ answer user queries)  
- [ ] Improve **chunking & formatting** for better readability
- [ ] Fix **graph generation** for better useablity and readability  
- [ ] Add support for multiple embedding models  

---

## Version History
- **v1.6** â€“ Added **Deepseek-r1** via Ollama for processing the retrieved results and implemented Mockito-based tests for Workflow1 and Workflow2 to enable fully mocked, offline testing.
- **v1.5** â€“ Switched to **Supabase Vector Store** for storing and retrieving embeddings.
- **v1.4** - Finalized using **Qwen3 embeddings** for retrieval and similarity score as well as the embedding insertion
- **v1.3** â€“ Switched to **Qwen3 embeddings** via Ollama.
- **v1.0** â€“ Added local saving of the embedings.
- **v0.9** â€“ Added local saving of the graph
- **v0.8** â€“ Initial graphRAG pipeline with TinkerPop / TinkerGraph using tf-idf embedings.  

---

## License
MIT License â€“ feel free to use, modify, and contribute.
